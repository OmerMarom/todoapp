(this.webpackJsonpwebprojectfrontend=this.webpackJsonpwebprojectfrontend||[]).push([[0],{144:function(t,e,o){t.exports=o(289)},149:function(t,e,o){},269:function(t,e,o){},286:function(t,e,o){},287:function(t,e,o){},289:function(t,e,o){"use strict";o.r(e);var n,i,a,r,d=o(0),c=o.n(d),s=o(26),l=o.n(s),u=o(15),p=o(19),h=o(20),f=o(21),m=o(22),g=o(299),b=o(295),T=o(43),N=(o(149),function(t){function e(){return Object(u.a)(this,e),Object(h.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){return c.a.createElement(g.a,{inverted:!0,className:"navBar",fixed:"top"},c.a.createElement(b.a,{className:"navBarContainer"},c.a.createElement(g.a.Item,{header:!0},c.a.createElement(T.a,{className:"logo",name:"sticky note outline"}),"TODO")))}}]),e}(d.Component)),O=o(17),v=o(48),C=o.n(v),k=o(297),_=o(298),j=o(296),y=o(23),D=(o(269),Object(y.b)("store")(n=Object(y.c)(n=function(t){function e(){var t,o;Object(u.a)(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(o=Object(h.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(i)))).state={todoDescription:o.props.todo.description,todoCheckbox:o.props.todo.isChecked},o.onChange=function(t){o.setState({todoDescription:t.target.value})},o.onEnterDown=function(t){"Enter"===t.key&&(t.preventDefault(),o.onUpdateDescription(t),t.target.blur())},o.onUpdateDescription=function(t){o.props.todo.description!==o.state.todoDescription&&(o.state.todoDescription.trim()?o.props.store.updateTodo(o.props.todo._id,o.state.todoDescription):o.props.store.deleteTodo(o.props.todo._id))},o.onToggleCheck=function(t){var e=!o.state.todoCheckbox;o.setState({todoCheckbox:e}),o.props.store.toggleCheck(o.props.todo._id,e)},o}return Object(m.a)(e,t),Object(p.a)(e,[{key:"componentWillReceiveProps",value:function(t){this.setState({todoDescription:t.todo.description,todoCheckbox:t.todo.isChecked})}},{key:"render",value:function(){return c.a.createElement("div",{className:"todoContainer"},c.a.createElement(j.a,{className:"todoCheckbox",checked:this.state.todoCheckbox,onChange:this.onToggleCheck}),c.a.createElement(C.a,{className:"customInput todoDescription",html:this.state.todoDescription,onBlur:this.onUpdateDescription,onKeyDown:this.onEnterDown,onChange:this.onChange}),c.a.createElement(_.a,{className:"deleteTodoButton",circular:!0,icon:"cancel",onClick:this.props.store.deleteTodo.bind(this,this.props.todo._id)}))}}]),e}(d.Component))||n)||n),E=function(t){function e(){return Object(u.a)(this,e),Object(h.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this;return this.props.todos.slice().sort((function(t,e){return new Date(t.createdAt)>new Date(e.createdAt)?-1:1})).map((function(e){return c.a.createElement(D,{todo:e,noteId:t.props.noteId})}))}}]),e}(d.Component),w=(o(286),Object(y.b)("store")(i=Object(y.c)(i=function(t){function e(){var t,o;Object(u.a)(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(o=Object(h.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(i)))).state={newTodoString:"",titleString:o.props.note.title.trim()},o.onChange=function(t,e){o.setState(Object(O.a)({},t,e.target.value))},o.onEnterDown=function(t,e){"Enter"===e.key&&t(e)},o.onUpdateTitle=function(t){o.state.titleString.trim()||o.setState({titleString:""}),o.props.store.updateTitle(o.props.note._id,o.state.titleString),t.target.blur()},o.onAddTodo=function(t){t.preventDefault(),o.state.newTodoString.trim()&&(o.props.store.addTodo(o.props.note._id,o.state.newTodoString),o.setState({newTodoString:""}))},o}return Object(m.a)(e,t),Object(p.a)(e,[{key:"componentWillReceiveProps",value:function(t){this.setState({titleString:t.note.title.trim()})}},{key:"render",value:function(){var t=this.props.note,e=t._id,o=t.todos,n=t.createdAt;return c.a.createElement("div",null,c.a.createElement(k.a,{className:"noteCard"},c.a.createElement(k.a.Content,null,c.a.createElement(C.a,{className:"customInput noteTitle",html:this.state.titleString,placeholder:"Title",onChange:this.onChange.bind(this,"titleString"),onBlur:this.onUpdateTitle,onKeyDown:this.onEnterDown.bind(this,this.onUpdateTitle)}),c.a.createElement(k.a.Meta,{className:"noteDate"},new Date(n).toLocaleDateString()),c.a.createElement(k.a.Description,null,c.a.createElement("div",null,c.a.createElement(T.a,{name:"plus"}),c.a.createElement(C.a,{className:"customInput addTodoInput",html:this.state.newTodoString,placeholder:"New todo",onBlur:this.onAddTodo,onKeyDown:this.onEnterDown.bind(this,this.onAddTodo),onChange:this.onChange.bind(this,"newTodoString")})),c.a.createElement("div",{className:"todoListContainer"},c.a.createElement(E,{todos:o,noteId:e})),c.a.createElement(_.a,{className:"deleteNoteButton",icon:"trash",onClick:this.props.store.deleteNote.bind(this,e)})))))}}]),e}(d.Component))||i)||i),S=Object(y.b)("store")(a=Object(y.c)(a=function(t){function e(){return Object(u.a)(this,e),Object(h.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){return this.props.store.notes.map((function(t){return c.a.createElement(w,{note:t})}))}}]),e}(d.Component))||a)||a,A=(o(287),o(288),o(300)),Q=Object(y.b)("store")(r=Object(y.c)(r=function(t){function e(){return Object(u.a)(this,e),Object(h.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.props.store.getNotes()}},{key:"render",value:function(){return c.a.createElement("div",{className:"app"},c.a.createElement(N,null),c.a.createElement("div",{className:"navBarPlaceholder"}),c.a.createElement("div",{className:"container"},c.a.createElement(A.a,{centered:!0},c.a.createElement(S,null)),this.props.store.notes.length<10&&c.a.createElement(_.a,{circular:!0,icon:"plus",className:"addNoteButton",onClick:this.props.store.addNote})))}}]),e}(d.Component))||r)||r,B=o(6),I=new function t(){Object(u.a)(this,t),this.notesQuery="\n        query {\n            notes {\n                _id\n                title\n                todos {\n                    _id\n                    description\n                    isChecked\n                    createdAt\n                }\n                createdAt\n            }\n        }\n    ",this.addNoteQuery="\n        mutation {\n            createNote {\n                _id\n                title\n                todos {\n                    _id\n                    description\n                    isChecked\n                    createdAt\n                }\n                createdAt\n            }\n        }\n    ",this.updateTitleQuery=function(t,e){return'\n        mutation {\n            updateNoteTitle(updatedNote: {\n                _id: "'.concat(t,'",\n                title: "').concat(e,'"\n            }) {\n                _id\n                title\n            }\n        }\n    ')},this.deleteNoteQuery=function(t){return'\n        mutation {\n            deleteNote(noteId: "'.concat(t,'") {\n                _id\n            }\n        }\n    ')}},U=new function t(){Object(u.a)(this,t),this.addTodoQuery=function(t,e){return'\n    mutation {\n        createTodo(newTodo:{description: "'.concat(e,'", todoNote: "').concat(t,'"}) {\n            _id\n            description\n            isChecked\n            todoNote {\n                _id\n            }\n        }\n    }\n')},this.updateTodoQuery=function(t,e){return'\n    mutation {\n        updateTodoDescription(updatedTodo: {_id: "'.concat(t,'", description: "').concat(e,'"}) {\n            _id\n            description\n            todoNote {\n                _id\n            }\n        }\n    }\n')},this.toggleCheckQuery=function(t,e){return'\n    mutation {\n        toggleTodoCheck(updatedTodo: {_id: "'.concat(t,'", isChecked: ').concat(e,"}) {\n            _id\n            isChecked\n            todoNote {\n                _id\n            }\n        }\n    }\n")},this.deleteTodoQuery=function(t){return'\n    mutation {\n        deleteTodo(todoId: "'.concat(t,'") {\n            _id\n            todoNote {\n                _id\n            }\n        }\n    }\n')}},x=function t(){var e=this;Object(u.a)(this,t),this.notes=[],this.getNotes=function(){e.dbOperation(I.notesQuery,(function(t){t.notes?e.notes=t.notes.slice().sort((function(t,e){return new Date(t.createdAt)>new Date(e.createdAt)?-1:1})):console.log("Get notes: No data retreived from backend.")}))},this.addNote=function(){e.dbOperation(I.addNoteQuery,(function(t){t.createNote?e.notes.unshift({_id:t.createNote._id,title:t.createNote.title,todos:t.createNote.todos,createdAt:t.createNote.createdAt}):console.log("Add note: No data retreived from backend.")}))},this.updateTitle=function(t,o){var n=e.notes.find((function(e){return t===e._id}));if(n){if(n.title!==o){e.dbOperation(I.updateTitleQuery(t,o),(function(t){var o=e.notes.find((function(e){return t.updateNoteTitle._id===e._id}));o||console.log("Update title: note not found."),o.title=t.updateNoteTitle.title}))}}else console.log("Update title: note not found.")},this.deleteNote=function(t){e.dbOperation(I.deleteNoteQuery(t),(function(t){t.deleteNote?e.notes=e.notes.filter((function(e){return e._id!==t.deleteNote._id})):console.log("Delete note: No data retreived from DB.")}))},this.addTodo=function(t,o){e.dbOperation(U.addTodoQuery(t,o),(function(t){if(t.createTodo){var o=t.createTodo,n=o._id,i=o.description,a=o.isChecked,r=o.todoNote,d=o.createdAt;e.notes=e.notes.map((function(t){return t._id===r._id&&t.todos.unshift({_id:n,description:i,isChecked:a,todoNote:r._id,createdAt:d}),t}))}else console.log("Add todo: No data retreived from DB.")}))},this.updateTodo=function(t,o){e.dbOperation(U.updateTodoQuery(t,o),(function(t){if(t.updateTodoDescription){var o=t.updateTodoDescription,n=o._id,i=o.description,a=o.todoNote,r=e.notes.find((function(t){return a._id===t._id}));if(r){var d=r.todos.find((function(t){return n===t._id}));d?d.description=i:console.log("Update todo: Todo not found.")}else console.log("Update todo: Note not found.")}else console.log("Update todo: No data retreived from DB.")}))},this.toggleCheck=function(t,o){e.dbOperation(U.toggleCheckQuery(t,o),(function(t){if(t.toggleTodoCheck){var o=t.toggleTodoCheck,n=o._id,i=o.isChecked,a=o.todoNote,r=e.notes.find((function(t){return a._id===t._id}));if(r){var d=r.todos.find((function(t){return n===t._id}));d?d.isChecked=i:console.log("Toggle check: Todo not found.")}else console.log("Toggle check: Note not found.")}else console.log("Toggle check: No data retreived from DB.")}))},this.deleteTodo=function(t){e.dbOperation(U.deleteTodoQuery(t),(function(t){if(t.deleteTodo){var o=e.notes.find((function(e){return e._id===t.deleteTodo.todoNote._id}));if(o){var n=!1;o.todos=o.todos.filter((function(e){return n=n||e._id!==t.deleteTodo._id,e._id!==t.deleteTodo._id})),n||console.log("Delete todo: Todo not found.")}else console.log("Delete todo: Note not found.")}else console.log("Delete todo: No data retreived from DB.")}))},this.dbOperation=function(t,e){fetch("http://localhost:80/graphql",{method:"POST",body:JSON.stringify({query:t}),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("DB operation failed. \nQuery: \n"+t);return e.json()})).then((function(t){e&&e(t.data)})).catch((function(t){console.log(t)}))}};Object(B.j)(x,{notes:B.o,getNotes:B.f,addNote:B.f,updateTitle:B.f,deleteNote:B.f,addTodo:B.f,updateTodo:B.f,toggleCheck:B.f,deleteTodo:B.f});var P=new x,q=c.a.createElement(y.a,{store:P},c.a.createElement(Q,null));l.a.render(q,document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.95e959b8.chunk.js.map